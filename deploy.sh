set -e;
mkdir -p classes;
clojure -M:test-runner-cognitect;
npm i;
shadow-cljs compile ci;
npx karma start --single-run;
clojure -Sdeps '{:deps {com.datomic/dev-local {:mvn/version "1.0.243"}}}' -e "(compile 'tech.thomas-sojka.shopping-cards.system)";
shadow-cljs release app;
clojure -Sdeps '{:deps {com.datomic/dev-local {:mvn/version "1.0.243"}}}' -M:uberdeps;
scp target/shopping-cards.jar pi@ubi-hub:/home/pi;
ssh pi@ubi-hub sudo systemctl restart shoppinglist.service;
